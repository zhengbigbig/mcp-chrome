# å¤š MCP Server é…ç½®æŒ‡å—

æœ¬æŒ‡å—å°†å¸®åŠ©æ‚¨åœ¨ MCP Browser Extension ä¸­é…ç½®å’Œç®¡ç†å¤šä¸ª MCP Serverã€‚

## ğŸ“‹ ç›®å½•

1. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
2. [Server ç±»å‹](#server-ç±»å‹)
3. [é…ç½®ç¤ºä¾‹](#é…ç½®ç¤ºä¾‹)
4. [ç®¡ç†ç•Œé¢](#ç®¡ç†ç•Œé¢)
5. [å·¥å…·é€‰æ‹©ç­–ç•¥](#å·¥å…·é€‰æ‹©ç­–ç•¥)
6. [æ•…éšœæ’é™¤](#æ•…éšœæ’é™¤)

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å¯åŠ¨æµ‹è¯• Server

é¦–å…ˆå¯åŠ¨æˆ‘ä»¬æä¾›çš„æµ‹è¯• MCP Serverï¼š

```bash
cd app/test-mcp-server
npm install
npm start
```

æµ‹è¯•æœåŠ¡å™¨å°†åœ¨ `http://localhost:3001` å¯åŠ¨ï¼Œæä¾›ä»¥ä¸‹å·¥å…·ï¼š

- `weather`: è·å–å¤©æ°”ä¿¡æ¯
- `translate`: æ–‡æœ¬ç¿»è¯‘
- `random_number`: ç”Ÿæˆéšæœºæ•°
- `system_info`: ç³»ç»Ÿä¿¡æ¯
- `base64_encode/decode`: Base64 ç¼–ç è§£ç 

### 2. æ·»åŠ  Server

1. æ‰“å¼€æµè§ˆå™¨æ’ä»¶çš„ sidepanel
2. åœ¨ "ğŸŒ Server ç®¡ç†" éƒ¨åˆ†ç‚¹å‡» "æ·»åŠ  Server"
3. å¡«å†™é…ç½®ä¿¡æ¯ï¼š

   - **Server åç§°**: `test-server`
   - **æ˜¾ç¤ºåç§°**: `æµ‹è¯•æœåŠ¡å™¨`
   - **ä¼ è¾“ç±»å‹**: `HTTP`
   - **ç«¯ç‚¹åœ°å€**: `http://localhost:3001`
   - **ä¼˜å…ˆçº§**: `7`

4. ç‚¹å‡» "æ·»åŠ " å®Œæˆé…ç½®

## ğŸ”§ Server ç±»å‹

### HTTP Server

- **ä¼ è¾“ç±»å‹**: `http`
- **ç«¯ç‚¹æ ¼å¼**: `http://localhost:3001`
- **é€‚ç”¨åœºæ™¯**: ç‹¬ç«‹çš„ HTTP API æœåŠ¡

### WebSocket Server

- **ä¼ è¾“ç±»å‹**: `websocket`
- **ç«¯ç‚¹æ ¼å¼**: `ws://localhost:3001/ws`
- **é€‚ç”¨åœºæ™¯**: éœ€è¦å®æ—¶é€šä¿¡çš„æœåŠ¡

### STDIO Server

- **ä¼ è¾“ç±»å‹**: `stdio`
- **å‘½ä»¤ç¤ºä¾‹**: `node server.js`
- **é€‚ç”¨åœºæ™¯**: æœ¬åœ°è¿›ç¨‹é€šä¿¡

### å†…ç½® Server

- **ä¼ è¾“ç±»å‹**: `builtin`
- **è¯´æ˜**: æµè§ˆå™¨æ’ä»¶å†…ç½®çš„ MCP Server
- **åŒ…å«å·¥å…·**: é¡µé¢æ“ä½œã€DOM æŸ¥è¯¢ã€æ»šåŠ¨æ§åˆ¶ç­‰

## ğŸ’¡ é…ç½®ç¤ºä¾‹

### ç¤ºä¾‹ 1: æœ¬åœ°å¼€å‘ç¯å¢ƒ

```javascript
// æµ‹è¯•æœåŠ¡å™¨
{
  name: 'test-server',
  displayName: 'æµ‹è¯•æœåŠ¡å™¨',
  type: 'http',
  endpoint: 'http://localhost:3001',
  priority: 8,
  auth: { type: 'none' }
}

// ç”Ÿäº§ API æœåŠ¡å™¨
{
  name: 'api-server',
  displayName: 'API æœåŠ¡å™¨',
  type: 'http',
  endpoint: 'https://api.example.com/mcp',
  priority: 6,
  auth: {
    type: 'bearer',
    token: 'your-api-token'
  }
}
```

### ç¤ºä¾‹ 2: å¤šæœåŠ¡å™¨åä½œ

```javascript
// é«˜ä¼˜å…ˆçº§ï¼šæ•°æ®åº“æœåŠ¡å™¨
{
  name: 'db-server',
  displayName: 'æ•°æ®åº“æœåŠ¡å™¨',
  type: 'http',
  endpoint: 'http://localhost:3002',
  priority: 9
}

// ä¸­ä¼˜å…ˆçº§ï¼šAI æœåŠ¡å™¨
{
  name: 'ai-server',
  displayName: 'AI æœåŠ¡å™¨',
  type: 'websocket',
  endpoint: 'ws://localhost:3003/ws',
  priority: 7
}

// ä½ä¼˜å…ˆçº§ï¼šç¼“å­˜æœåŠ¡å™¨
{
  name: 'cache-server',
  displayName: 'ç¼“å­˜æœåŠ¡å™¨',
  type: 'http',
  endpoint: 'http://localhost:3004',
  priority: 4
}
```

## ğŸ›ï¸ ç®¡ç†ç•Œé¢

### Server çŠ¶æ€æŒ‡ç¤º

- ğŸŸ¢ **å·²è¿æ¥**: Server æ­£å¸¸è¿è¡Œ
- ğŸŸ¡ **è¿æ¥ä¸­**: æ­£åœ¨å°è¯•è¿æ¥
- ğŸ”´ **é”™è¯¯/æ–­å¼€**: è¿æ¥å¤±è´¥æˆ–æ–­å¼€

### Server ä¿¡æ¯æ˜¾ç¤º

æ¯ä¸ª Server å¡ç‰‡æ˜¾ç¤ºï¼š

- **ç±»å‹**: HTTP/WebSocket/STDIO
- **ç«¯ç‚¹**: Server åœ°å€
- **å·¥å…·æ•°é‡**: å¯ç”¨å·¥å…·æ€»æ•°
- **å»¶è¿Ÿ**: å“åº”æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰

### æ“ä½œæŒ‰é’®

- **ç§»é™¤**: åˆ é™¤ Server é…ç½®
- **æ£€æŸ¥**: æ‰‹åŠ¨æ‰§è¡Œå¥åº·æ£€æŸ¥
- **åˆ·æ–°**: é‡æ–°åŠ è½½ Server åˆ—è¡¨

## ğŸ§  å·¥å…·é€‰æ‹©ç­–ç•¥

æ’ä»¶ä½¿ç”¨æ™ºèƒ½ç­–ç•¥é€‰æ‹©æœ€ä½³ Serverï¼š

### 1. è‡ªåŠ¨é€‰æ‹©

å½“æ‚¨ä½¿ç”¨è‡ªç„¶è¯­è¨€è¾“å…¥æ—¶ï¼ŒLLM ä¼šï¼š

1. åˆ†æç”¨æˆ·æ„å›¾
2. æŸ¥æ‰¾å¯ç”¨å·¥å…·
3. é€‰æ‹©æœ€ä½³ Serverï¼ˆåŸºäºä¼˜å…ˆçº§ã€å»¶è¿Ÿã€æˆåŠŸç‡ï¼‰
4. æ‰§è¡Œå·¥å…·å¹¶è¿”å›ç»“æœ

### 2. ä¼˜å…ˆçº§è§„åˆ™

- **ä¼˜å…ˆçº§**: 1-10ï¼Œæ•°å­—è¶Šå¤§ä¼˜å…ˆçº§è¶Šé«˜
- **å»¶è¿Ÿ**: å“åº”æ—¶é—´è¶Šä½ä¼˜å…ˆçº§è¶Šé«˜
- **æˆåŠŸç‡**: å†å²æˆåŠŸç‡è¶Šé«˜ä¼˜å…ˆçº§è¶Šé«˜
- **å¥åº·çŠ¶æ€**: åªæœ‰å¥åº·çš„ Server ä¼šè¢«é€‰æ‹©

### 3. è´Ÿè½½å‡è¡¡

- ç›¸åŒå·¥å…·åœ¨å¤šä¸ª Server ä¸Šå¯ç”¨æ—¶ï¼Œè‡ªåŠ¨é€‰æ‹©æœ€ä½³ Server
- å¤±è´¥æ—¶è‡ªåŠ¨åˆ‡æ¢åˆ°å¤‡ç”¨ Server
- æ”¯æŒå¹¶è¡Œå·¥å…·è°ƒç”¨ä»¥æé«˜æ€§èƒ½

## ğŸ” æ•…éšœæ’é™¤

### è¿æ¥é—®é¢˜

**é—®é¢˜**: Server æ˜¾ç¤ºçº¢è‰²çŠ¶æ€ï¼ˆè¿æ¥å¤±è´¥ï¼‰

**è§£å†³æ–¹æ¡ˆ**:

1. æ£€æŸ¥ Server æ˜¯å¦æ­£åœ¨è¿è¡Œ
2. éªŒè¯ç«¯ç‚¹åœ°å€æ˜¯å¦æ­£ç¡®
3. æ£€æŸ¥é˜²ç«å¢™è®¾ç½®
4. æŸ¥çœ‹ CORS é…ç½®ï¼ˆHTTP Serverï¼‰

### å·¥å…·ä¸å¯ç”¨

**é—®é¢˜**: æŸäº›å·¥å…·æ— æ³•è°ƒç”¨

**è§£å†³æ–¹æ¡ˆ**:

1. ç‚¹å‡» "æ£€æŸ¥" æŒ‰é’®é‡æ–°æ£€æŸ¥ Server çŠ¶æ€
2. ç‚¹å‡» "åˆ·æ–°" é‡æ–°åŠ è½½å·¥å…·åˆ—è¡¨
3. æ£€æŸ¥ Server æ—¥å¿—æŸ¥çœ‹é”™è¯¯ä¿¡æ¯

### æ€§èƒ½é—®é¢˜

**é—®é¢˜**: å·¥å…·è°ƒç”¨ç¼“æ…¢

**è§£å†³æ–¹æ¡ˆ**:

1. æ£€æŸ¥ç½‘ç»œè¿æ¥
2. è°ƒæ•´ Server ä¼˜å…ˆçº§
3. è€ƒè™‘ä½¿ç”¨æœ¬åœ° Server å‡å°‘å»¶è¿Ÿ

## ğŸ¯ æœ€ä½³å®è·µ

### 1. Server å‘½å

- ä½¿ç”¨æè¿°æ€§åç§°ï¼ˆå¦‚ `ai-server`ã€`db-server`ï¼‰
- é¿å…ç‰¹æ®Šå­—ç¬¦å’Œç©ºæ ¼

### 2. ä¼˜å…ˆçº§è®¾ç½®

- **10**: å…³é”®ç”Ÿäº§æœåŠ¡å™¨
- **7-9**: é‡è¦æœåŠ¡å™¨
- **4-6**: æ™®é€šæœåŠ¡å™¨
- **1-3**: å¤‡ç”¨/æµ‹è¯•æœåŠ¡å™¨

### 3. ç›‘æ§å’Œç»´æŠ¤

- å®šæœŸæ£€æŸ¥ Server å¥åº·çŠ¶æ€
- ç›‘æ§å»¶è¿Ÿå’ŒæˆåŠŸç‡
- åŠæ—¶ç§»é™¤ä¸å¯ç”¨çš„ Server

### 4. å®‰å…¨è€ƒè™‘

- ä½¿ç”¨ HTTPS ç«¯ç‚¹ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
- æ­£ç¡®é…ç½®èº«ä»½éªŒè¯
- å®šæœŸæ›´æ–°è®¿é—®ä»¤ç‰Œ

## ğŸ“ API å‚è€ƒ

### Server é…ç½®å¯¹è±¡

```typescript
interface ServerConfig {
  name: string; // Server å”¯ä¸€æ ‡è¯†
  displayName: string; // æ˜¾ç¤ºåç§°
  type: 'http' | 'websocket' | 'stdio' | 'builtin';
  endpoint?: string; // HTTP/WebSocket ç«¯ç‚¹
  command?: string; // STDIO å‘½ä»¤
  args?: string[]; // STDIO å‚æ•°
  auth?: {
    // èº«ä»½éªŒè¯
    type: 'none' | 'bearer' | 'basic';
    token?: string;
    username?: string;
    password?: string;
  };
  timeout?: number; // è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰
  retryCount?: number; // é‡è¯•æ¬¡æ•°
  priority?: number; // ä¼˜å…ˆçº§ 1-10
  enabled?: boolean; // æ˜¯å¦å¯ç”¨
  metadata?: Record<string, any>; // å…ƒæ•°æ®
}
```

## ğŸ¤ è´¡çŒ®

å¦‚æœæ‚¨æœ‰æ–°çš„ Server ç±»å‹æˆ–åŠŸèƒ½å»ºè®®ï¼Œæ¬¢è¿æäº¤ Issue æˆ– Pull Requestï¼

---

**æ³¨æ„**: æ­¤åŠŸèƒ½éœ€è¦ MCP Browser Extension v1.0+ æ”¯æŒã€‚
