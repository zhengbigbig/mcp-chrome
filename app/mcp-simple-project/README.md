# MCP Simple Project

ä¸€ä¸ªåŸºäº @modelcontextprotocol/sdk åŒ…çš„ç®€å• MCP server å’Œ client å®ç°ï¼Œé›†æˆäº† Ollama deepseek-r1:1.5b æ¨¡å‹ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸš€ **ç®€å•çš„ MCP Server**: æä¾›åŸºæœ¬å·¥å…·åŠŸèƒ½ï¼ˆå›æ˜¾ã€è®¡ç®—ã€è·å–æ—¶é—´ï¼‰
- ğŸ¤– **æ™ºèƒ½ MCP Client**: é›†æˆ Ollama deepseek-r1:1.5b æ¨¡å‹ï¼Œæ”¯æŒè‡ªç„¶è¯­è¨€äº¤äº’
- ğŸ”§ **å·¥å…·è‡ªåŠ¨è¯†åˆ«**: æ ¹æ®ç”¨æˆ·è¾“å…¥è‡ªåŠ¨é€‰æ‹©ä½¿ç”¨ MCP å·¥å…·æˆ– AI æ¨¡å‹
- ğŸ’¬ **äº¤äº’å¼ä¼šè¯**: æ”¯æŒå‘½ä»¤è¡Œäº¤äº’å¼å¯¹è¯
- ğŸŒŠ **æµå¼å“åº”**: æ”¯æŒ Ollama æ¨¡å‹çš„æµå¼è¾“å‡º

## ç¯å¢ƒè¦æ±‚

1. **Node.js** >= 16.0.0
2. **Ollama** æœåŠ¡è¿è¡Œåœ¨ `http://localhost:11434`
3. **deepseek-r1:1.5b** æ¨¡å‹å·²å®‰è£…

## æŠ€æœ¯æ ˆ

- **åç«¯**: TypeScript + @modelcontextprotocol/sdk + Axios
- **å‰ç«¯**: React + TypeScript + Vite
- **AI é›†æˆ**: Ollama API

### å®‰è£… Ollama å’Œæ¨¡å‹

```bash
# å®‰è£… Ollama (macOS)
brew install ollama

# å¯åŠ¨ Ollama æœåŠ¡
ollama serve

# å®‰è£… deepseek-r1:1.5b æ¨¡å‹
ollama pull deepseek-r1:1.5b
```

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. æµ‹è¯•ç¯å¢ƒ

```bash
# æµ‹è¯• Ollama è¿æ¥å’Œæ¨¡å‹
npm run test-ollama
```

### 3. å¯åŠ¨é¡¹ç›®

```bash
# ğŸ¯ è°ƒè¯•é¡µé¢ï¼ˆæ¨èï¼‰- å¯è§†åŒ–è°ƒè¯•ç•Œé¢
npm run debug-ui

# å‘½ä»¤è¡Œæ¨¡å¼
npm run dev      # å¯åŠ¨äº¤äº’å¼å®¢æˆ·ç«¯
npm run server   # å¯åŠ¨ MCP Server
npm run client   # å¯åŠ¨ MCP Client
```

## ğŸ¨ è°ƒè¯•é¡µé¢åŠŸèƒ½

è°ƒè¯•é¡µé¢æä¾›äº†ä¸€ä¸ªå¯è§†åŒ–çš„ç•Œé¢æ¥æµ‹è¯•å’Œè°ƒè¯• MCP åŠŸèƒ½ï¼š

### å·¦ä¾§é¢æ¿ - MCP Server
- **æœåŠ¡å™¨çŠ¶æ€**: æ˜¾ç¤ºæœåŠ¡å™¨è¿æ¥çŠ¶æ€
- **å·¥å…·æµ‹è¯•**: å¯ä»¥ç›´æ¥æµ‹è¯• echoã€calculateã€get_time å·¥å…·
- **å®æ—¶æ—¥å¿—**: æ˜¾ç¤ºæœåŠ¡å™¨ç«¯çš„æ‰€æœ‰æ“ä½œæ—¥å¿—
- **å‚æ•°é…ç½®**: æ”¯æŒè‡ªå®šä¹‰å·¥å…·å‚æ•°

### å³ä¾§é¢æ¿ - MCP Client  
- **å®¢æˆ·ç«¯çŠ¶æ€**: æ˜¾ç¤ºå®¢æˆ·ç«¯å’Œ Ollama è¿æ¥çŠ¶æ€
- **æ™ºèƒ½äº¤äº’**: è‡ªåŠ¨è¯†åˆ«ç”¨æˆ·æ„å›¾ï¼Œé€‰æ‹©å·¥å…·æˆ– AI æ¨¡å‹
- **Ollama é…ç½®**: å¯é…ç½® Ollama æœåŠ¡åœ°å€å’Œæ¨¡å‹
- **å¯¹è¯æµ‹è¯•**: æ”¯æŒä¸ deepseek-r1:1.5b æ¨¡å‹å¯¹è¯

### ä½¿ç”¨ç¤ºä¾‹
1. è®¿é—® `http://localhost:3000` æ‰“å¼€è°ƒè¯•é¡µé¢
2. ç‚¹å‡»"å¯åŠ¨æœåŠ¡å™¨"å¯åŠ¨ MCP Server
3. ç‚¹å‡»"è¿æ¥ MCP"è¿æ¥å®¢æˆ·ç«¯åˆ°æœåŠ¡å™¨  
4. ç‚¹å‡»"è¿æ¥ Ollama"è¿æ¥åˆ° AI æ¨¡å‹
5. åœ¨å³ä¾§è¾“å…¥æ¡†æµ‹è¯•å„ç§åŠŸèƒ½

## ä½¿ç”¨æ–¹æ³•

å¯åŠ¨å®¢æˆ·ç«¯åï¼Œä½ å¯ä»¥ï¼š

### ä½¿ç”¨ MCP å·¥å…·
- **å›æ˜¾æ–‡æœ¬**: `å›æ˜¾ ä½ å¥½ä¸–ç•Œ` æˆ– `echo hello world`
- **æ•°å­¦è®¡ç®—**: `è®¡ç®— 2 + 3 * 4` æˆ– `ç®—ä¸€ä¸‹ 10 / 2`
- **æŸ¥çœ‹æ—¶é—´**: `ç°åœ¨å‡ ç‚¹` æˆ– `æ—¶é—´`

### ä¸ AI æ¨¡å‹å¯¹è¯
- ç›´æ¥è¾“å…¥ä»»ä½•é—®é¢˜ï¼Œå¦‚ï¼š`ä½ å¥½ï¼Œè¯·ä»‹ç»ä¸€ä¸‹ä½ è‡ªå·±`
- ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ¤æ–­æ˜¯ä½¿ç”¨å·¥å…·è¿˜æ˜¯ AI æ¨¡å‹å›ç­”

### ç¤ºä¾‹å¯¹è¯

```
ä½ : å›æ˜¾ Hello MCP!
ğŸ¤– å›æ˜¾: Hello MCP!

ä½ : è®¡ç®— 15 * 8 + 7
ğŸ¤– è®¡ç®—ç»“æœ: 15 * 8 + 7 = 127

ä½ : ç°åœ¨å‡ ç‚¹
ğŸ¤– å½“å‰æ—¶é—´: 2024-01-15 14:30:25

ä½ : è¯·è§£é‡Šä¸€ä¸‹ä»€ä¹ˆæ˜¯ MCP
ğŸ¤– MCP (Model Context Protocol) æ˜¯ä¸€ä¸ª...
```

## é¡¹ç›®ç»“æ„

```
mcp-simple-project/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts            # å‘½ä»¤è¡Œä¸»å…¥å£
â”‚   â”œâ”€â”€ server.ts           # MCP Server å®ç°
â”‚   â”œâ”€â”€ client.ts           # MCP Client å’Œ Ollama é›†æˆ
â”‚   â””â”€â”€ debug-ui/           # React è°ƒè¯•é¡µé¢
â”‚       â”œâ”€â”€ index.tsx       # React å…¥å£
â”‚       â”œâ”€â”€ index.html      # HTML æ¨¡æ¿
â”‚       â”œâ”€â”€ styles.css      # æ ·å¼æ–‡ä»¶
â”‚       â””â”€â”€ components/     # React ç»„ä»¶
â”œâ”€â”€ vite.config.ts          # Vite é…ç½®
â”œâ”€â”€ package.json            # é¡¹ç›®é…ç½®å’Œä¾èµ–
â”œâ”€â”€ tsconfig.json           # TypeScript é…ç½®
â”œâ”€â”€ README.md               # é¡¹ç›®è¯´æ˜
â””â”€â”€ QUICK_START.md          # å¿«é€Ÿå¯åŠ¨æŒ‡å—
```

## å¯ç”¨å‘½ä»¤

```bash
# å¼€å‘å‘½ä»¤
npm run dev          # å¼€å‘æ¨¡å¼ï¼Œå¯åŠ¨äº¤äº’å¼å®¢æˆ·ç«¯
npm run server       # åªå¯åŠ¨ MCP Server
npm run client       # åªå¯åŠ¨ MCP Client
npm run test-ollama  # æµ‹è¯• Ollama è¿æ¥

# è°ƒè¯•é¡µé¢
npm run debug-ui     # å¯åŠ¨ React è°ƒè¯•é¡µé¢ (æ¨è)
npm run build-ui     # æ„å»ºè°ƒè¯•é¡µé¢

# æ„å»ºå‘½ä»¤
npm run build        # ç¼–è¯‘ TypeScript
npm run start        # è¿è¡Œç¼–è¯‘åçš„ä»£ç 
```

## MCP Server å·¥å…·

### 1. echo (å›æ˜¾)
- **æè¿°**: å›æ˜¾è¾“å…¥çš„æ–‡æœ¬
- **å‚æ•°**: `text` (string) - è¦å›æ˜¾çš„æ–‡æœ¬

### 2. calculate (è®¡ç®—)
- **æè¿°**: æ‰§è¡Œç®€å•çš„æ•°å­¦è®¡ç®—
- **å‚æ•°**: `expression` (string) - æ•°å­¦è¡¨è¾¾å¼ï¼Œå¦‚ "2 + 3 * 4"

### 3. get_time (è·å–æ—¶é—´)
- **æè¿°**: è·å–å½“å‰æ—¶é—´
- **å‚æ•°**: æ— 

## é…ç½®é€‰é¡¹

### Ollama é…ç½®

é»˜è®¤é…ç½®ï¼š
- **æœåŠ¡åœ°å€**: `http://localhost:11434`
- **æ¨¡å‹**: `deepseek-r1:1.5b`

å¯ä»¥é€šè¿‡ç¯å¢ƒå˜é‡æˆ–ä»£ç ä¿®æ”¹ï¼š

```typescript
const client = new SimpleMCPClient(
  'http://your-ollama-server:11434',  // è‡ªå®šä¹‰æœåŠ¡åœ°å€
  'your-model-name'                   // è‡ªå®šä¹‰æ¨¡å‹åç§°
);
```

## æ•…éšœæ’é™¤

### 1. Ollama æœåŠ¡ä¸å¯ç”¨
```bash
# æ£€æŸ¥ Ollama æ˜¯å¦è¿è¡Œ
curl http://localhost:11434/api/tags

# å¯åŠ¨ Ollama æœåŠ¡
ollama serve
```

### 2. æ¨¡å‹ä¸å­˜åœ¨
```bash
# åˆ—å‡ºå·²å®‰è£…çš„æ¨¡å‹
ollama list

# å®‰è£… deepseek-r1:1.5b æ¨¡å‹
ollama pull deepseek-r1:1.5b
```

### 3. MCP Server è¿æ¥å¤±è´¥
- ç¡®ä¿æ²¡æœ‰å…¶ä»–è¿›ç¨‹å ç”¨ç›¸åŒç«¯å£
- æ£€æŸ¥ TypeScript ç¼–è¯‘æ˜¯å¦æˆåŠŸ
- æŸ¥çœ‹é”™è¯¯æ—¥å¿—è·å–è¯¦ç»†ä¿¡æ¯

## å¼€å‘è¯´æ˜

### æ‰©å±• MCP å·¥å…·

åœ¨ `src/server.ts` ä¸­æ·»åŠ æ–°å·¥å…·ï¼š

```typescript
// æ·»åŠ åˆ°å·¥å…·åˆ—è¡¨
{
  name: 'your_tool',
  description: 'å·¥å…·æè¿°',
  inputSchema: {
    type: 'object',
    properties: {
      param: { type: 'string', description: 'å‚æ•°æè¿°' }
    },
    required: ['param']
  }
}

// æ·»åŠ å·¥å…·å¤„ç†é€»è¾‘
case 'your_tool':
  // å®ç°å·¥å…·é€»è¾‘
  return { content: [{ type: 'text', text: 'ç»“æœ' }] };
```

### è‡ªå®šä¹‰ AI æ¨¡å‹

ä¿®æ”¹ `src/client.ts` ä¸­çš„ OllamaClient é…ç½®æˆ–æ›¿æ¢ä¸ºå…¶ä»– AI æœåŠ¡ã€‚

## è®¸å¯è¯

ISC License

## è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼
